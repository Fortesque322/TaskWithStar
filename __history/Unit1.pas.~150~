unit Unit1;

interface

uses
  System.SysUtils;

type
  TServer = record
    FModel: array of string;
    FUptimeDay :integer;
    FServiceDate: integer;
  end;

  TServiceCentr = record
    FDetails : array of string;
    FDeliveryTimeDay : integer;
    FBill : integer;
  end;

  TServiceEngineer = record
    FName : array of string;
    FSalary : integer;
    FExperience : integer;
  end;

  TCount = class
    Server : TServer;
    ServiceCentr : TServiceCentr;
    ServiceEngineer : TServiceEngineer;
    procedure SetModel();
    procedure SetUpTime();
    procedure SetServiceDate();
    procedure SetDetails();
    procedure SetDeliveryTime();
    procedure SetBill();
    procedure SetEngineerName();
    procedure SetSalary();
    procedure SetExperience();
    procedure SaveToText();
    procedure SaveToNoType();
    procedure ReadFromText();
    function AsBytes : TBytes;
    procedure SetBytes(Buf: Tbytes);
    constructor Create();
    destructor Destroy;
  end;

implementation

{ TCount }

function TCount.AsBytes: TBytes;
begin

end;

constructor TCount.Create();
begin

end;

destructor TCount.Destroy;
begin

end;

procedure TCount.ReadFromText;
  var
    TextRead: TextFile;
    str: string; 
  begin
    AssignFile(TextRead, 'C:\distr\Record.txt');
    Reset(TextRead);
    while not eof(TextRead) do
      begin
        Readln(TextRead, str);
        writeln(str);
    end;
    Close(TextRead);
  end;

procedure TCount.SetBill();
  var
    Price : integer;
  begin
    Writeln('Счет: ');
    readln(Price);
    ServiceCentr.FBill := Price;
  end;

procedure TCount.SetDeliveryTime;
  var
    DeliveryDay : integer;
  begin
    Writeln('Дней до доставки: : ');
    readln(DeliveryDay);
    ServiceCentr.FDeliveryTimeDay := DeliveryDay;
  end;

procedure TCount.SetDetails;
  begin

  end;

procedure TCount.SetEngineerName();
  var
    i ,y : integer;
    x, Quantity: string;
    flag: boolean;
  begin
    flag := true;
    i := 0;
    Writeln('Кол-во сотурдников: ');
    readln(Quantity);                              //Вводим размер массива
    try
      Y:= StrToInt(Quantity) - 1;
    except
      Writeln('No');
      flag := False;
    end;

    if not flag then
    begin
      SetEngineerName;                    //рекурсия
      exit;
    end;

    Writeln('Введите имена: ');
    for I := 0 to y do
    begin
      readln(x);                                  //Ввод эодного лемента массива
      ServiceEngineer.FName := ServiceEngineer.FName + [x];  // Присваивание Фнейму его же значение плюс новый элемент массива веденный с клавиатуры
    end;

  end;

procedure TCount.SetExperience();
  var
    Exp: string;
    number : integer;
    flag: boolean;
  begin
    flag:= true;
    Readln(Exp);

    try
      number:= StrToInt(Exp);
    except
      Writeln('Введены некоректные данные:');
      flag := false;
    end;

    if not flag  then
     begin
     SetExperience;
     exit;
     end;

    Writeln('Стаж: ');
    ServiceEngineer.FExperience := number;
  end;

procedure TCount.SetModel();
  var
    i,x,number : integer;
    s : string;
    flag: boolean;
  begin
    i := 0;
    flag := true;
    Writeln('Количество серверов: ');
    readln(s);
      try
        number:= StrToInt(s) - 1;
      except
        Writeln('Введены некоректные данные:');
        flag:= false;
      end;

    if not flag then
      begin
        SetModel;
        exit
      end;

    Writeln('Введите модели: ');
    for I := 0 to number do
    readln(s);
    Server.FModel := Server.FModel + [s];
  end;

procedure TCount.SetSalary();
  var
    Salary : string;
    number : integer;
    flag: boolean;
  begin
    flag := true;
    Writeln('ЗП: ');
    readln(Salary);
    try
      number:= StrToInt(Salary);
    except
      Writeln('Введены некоректные данные:');
      flag:= false;
    end;

    if not flag then
      begin
        SetSalary;
        exit;
      end;

    ServiceEngineer.FSalary := number;
  end;

procedure TCount.SetServiceDate();
  var
    DateDay: integer;
  begin
    Writeln('Через сколько дней обсуживание: ');
    readln(DateDay);
    Server.FServiceDate:= DateDay;
  end;

procedure TCount.SetUpTime();
  var
    Days : integer;
  begin
    Writeln('Время рааботы сервера (Дни): ');
    readln(Days);
    Server.FUptimeDay:= Days;
  end;

procedure TCount.SaveToText;
  var
    TextForSave : TextFile;
    i : integer;
    str : string;
  begin
    AssignFile(TextForSave, 'C:\Distr\Record.txt');   //привязка файла к переменной
    if not FileExists('C:\Distr\Record.txt') then     //если файла нет то
      Rewrite(TextForSave);                           //Создать его
    Append(TextForSave);                              //Добавить в конец строки
    //Engineer                                        
    for str in ServiceEngineer.FName do               //Перебор значений в массиве
    Writeln(TextForSave, str);                        //Вывод элементов массива
    Writeln(TextForSave, ServiceEngineer.FSalary);
    Writeln(TextForSave, ServiceEngineer.FExperience); 
    //Model   
    for str in Server.FModel do
    Writeln(TextForSave, str);
    Writeln(TextForSave, Server.FUptimeDay);
    Writeln(TextForSave, Server.FServiceDate);
    //Service
    for str in ServiceCentr.FDetails do
    Writeln(TextForSave, str);
    Writeln(TextForSave, ServiceCentr.FDeliveryTimeDay);
    Writeln(TextForSave, ServiceCentr.FBill);
    Close(TextForSave);
  end;

procedure TCount.SaveToNoType;
  var
    TextForByte : File;
    count:integer;
    buf : TBytes;
  begin
    AssignFile(TextForByte,'C:\distr\NoTypeFile');
    if not FileExists('C:\distr\NoTypeFile') then
      Rewrite(TextForByte,1);
    Reset(TextForByte,1);
    BlockWrite(TextForByte, buf, count);
    Close(TextForByte);
  end;

procedure TCount.SetBytes(Buf: Tbytes);
begin

end;

end.
